<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>P(7.1) WTD - My Docs</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "P(7.1) WTD";
        var mkdocs_page_input_path = "Grupo1/Lenguaje-Embebido-/P(7.1) WTD.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> My Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Proyectos de 3er Ciclo</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Grupo1</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="#">Herramientas</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Herramientas/Acelerar/">Acelerar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Herramientas/Actualizador%20de%20Software/">Actualizador de Software</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Herramientas/Cuidar/">Cuidar</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Herramientas/Introduccion/">Introduccion</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Herramientas/Proteger/">Proteger</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Introduccion</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Agotamiento%20de%20las%20direcciones%20IPv4/">Agotamiento de las direcciones IPv4</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Clacificaci%C3%B3n/">Prefijos de subred</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Direccionamiento%20IPv6/">Direccionamiento IPv6</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Estandaresdeinternet%20%20que%20es%20IETF/">¿Cuáles son los estándares de redes?</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Formato%20de%20las%20direcciones%20IPV6/">Formato de las direcciones IPV6</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/IPv6/">IPv6</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Interconexi%C3%B3n%20de%20redes/">Interconexión de redes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Internet/">Internet</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Lacnic%20y%20su%20rol%20para%20la%20region%20de%20America%20latina%20y%20el%20caribe/">Lacnic y su rol para la region de America latina y el caribe</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Organizaciones%20involucradas%20en%20la%20gobernanza%20del%20internet/">Gobernanza de Internet – Por qué funciona el enfoque de múltiples partes interesadas.</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Protocolo/">Protocolo</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/Que%20es%20una%20direccionip/">Definición de dirección IP</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Introduccion/sistema%20autonomo/">Sistemas autónomos</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Lenguaje Embebido </a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../P%281%29Lenguaje%20Embebido%20Introduccion/">SISTEMAS EMBEBIDOS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%282%29Puertos%20Digitales/">P(2)Puertos Digitales</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%283%29Modulos%20de%20comucicaci%C3%B3n/">P(3)Modulos de comucicación</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%284%29CAD-CDA/">Entradas Analógicas</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%285%29Interrupciones/">Interrupciones</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%286%29Timers/">TimerOne</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%287%29%20Funciones%20Especificas/">P(7) Funciones Especificas</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">P(7.1) WTD</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%287.2%29%20ModosSleep/">P(7.2) ModosSleep</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%287.3%29%20Sistemas%20en%20%20tiempo%20Real/">P(7.3) Sistemas en  tiempo Real</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%287.4%29%20Lectura%20y%20escritura%20de%20datos%20en%20la%20memoria%20EEPROM/">P(7.4) Lectura y escritura de datos en la memoria EEPROM</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../P%288%29Desarrollo%20de%20Sistemas%20Embebidos/">P(8)Desarrollo de Sistemas Embebidos</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Grupo2</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Grupo2/dispositivosdetransmision/">Dispositivosdetransmision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Grupo2/electronica/">Electronica</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Grupo2/herramientasinformaticas/">Herramientasinformaticas</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Grupo2/integrantes1/">Integrantes1</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Grupo3</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="#">Dispositivos de Transmisión</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Grupo3/Dispositivos_de_Transmisi%C3%B3n/Dispositivos_de_Transmisi%C3%B3n/">Protocolos IPv4 e IPv6</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Electrónica II</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Grupo3/Electr%C3%B3nica_II/Electr%C3%B3nica_II/">**Encendido de un Foco a 120 V Automáticamente**</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">H.I.M</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Grupo3/H.I.M/H.I.M/">**Herramienta de Optimización del Sistema**</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Mantenimiento de Ordenadores</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../../Grupo3/Mantenimiento_de_Ordenadores/Mantenimiento_de_Ordenadores/">**Ensamblaje y Mantenimiento de PC**</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Grupo4</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../Grupo4/">Proyecto Final</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Test</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="#">Docs</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../../Grupo4/test/docs/">HERRAMIENTAS INFORMÁTICAS DE MANTENIMIENTO</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Grupo4/test/docs/Electr%C3%B3nica/">ALARMA INTEGRADA CON CÓDIGO DE SEGURIDAD REPRESENTADA EN UN CIRCUITO</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Grupo4/test/docs/Herramientas/">Características y funciones de la herramienta Bleachbit</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../../Grupo4/test/docs/mantenimiento/">**Mantenimiento de Ordenadores**</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">My Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Grupo1 &raquo;</li>
          <li>Lenguaje Embebido  &raquo;</li><li>P(7.1) WTD</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 id="wtd">WTD</h3>
<p>El watchdog timer (o perro guardián), es un mecanismo de seguridad que provocaun reset del sistema en caso de que éste se haya bloqueado. Consiste en uN temporizador que irá continuamente decrementando un contador, inicialmente conun valor alto. Si el programa falla o se bloquea, al no poder actualizar el contador del perro guardián a su valor de inicio, éste llegará a decrementarse hasta cero y se
reseteará el sistema.</p>
<h3 id="cambio-de-configuracion-de-arduino-por-wdt">CAMBIO DE CONFIGURACIÓN DE ARDUINO POR WDT</h3>
<ul>
<li>OBJETIVO: Cambiar la configuración de la cx serial y timer 2 en cada reinicio de programa</li>
<li>watchdog </li>
<li>sistema de reinicio por software</li>
<li>
<p>funciones:</p>
</li>
<li>
<p>wdt_disable(): deshabilita el watchdog</p>
</li>
<li>wdt_enable(): habilita la función </li>
<li>tiempos:WDT0_15MS,WDT0_500MS,...WDT0_8S </li>
<li>libreria:avr/wdt.h </li>
<li>wdt_reset(): resetea al contador  </li>
</ul>
<p>*/</p>
<h1 id="include-libreria-wdt">include<avr/wdt.h> // librería wdt</h1>
<h1 id="include-libreria-eeprom">include <EEPROM.h> // librería EEPROM</h1>
<h1 id="include-libreria-timer2">include <MsTimer2.h> // librería Timer2</h1>
<p>int j; // varaible de cambio de configuración
void setup() {</p>
<pre><code>attachInterrupt(0,on,LOW); // habilita

interrupcion 0

MsTimer2::set(9000, conteo); // timer 2 a 9s 
period

j=EEPROM.read(0);   // lectura de dato desde EEPROM

 if(j==1){ // condición de configuración

   MsTimer2::start(); // habilita timer


   Serial.begin(19200); // cx serial

    }

 else{

   Serial.begin(9600); // cx serial a

   diferente velocidad

    wdt_disable(); // deshabilita wdt

    MsTimer2::stop();   // para el timer

    }
</code></pre>
<p>Serial.println("INICIO");          // mensaje</p>
<p>}</p>
<p>void loop() {</p>
<p>Serial.println(j); // envía el estado de </p>
<p>variable</p>
<p>delay(200);</p>
<p>}</p>
<p>void on(){ // interrupción</p>
<pre><code>MsTimer2::start(); // inicia Timer 2

j=1-j; // cambia de estado para nuevo reset

EEPROM.update(0,j); // actualiza valor de

variable

if(j==0) // condición de config

MsTimer2::stop(); // detiene timer
</code></pre>
<p>}
void conteo(){ // rutina de timer</p>
<pre><code>Serial.println("timer"); // mensaje

if(j==1){ // condición de funcionamiento

     wdt_enable(WDTO_1S); // reinicio de

     sistema

    }
</code></pre>
<p>}</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../P%287%29%20Funciones%20Especificas/" class="btn btn-neutral float-left" title="P(7) Funciones Especificas"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../P%287.2%29%20ModosSleep/" class="btn btn-neutral float-right" title="P(7.2) ModosSleep">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../P%287%29%20Funciones%20Especificas/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../P%287.2%29%20ModosSleep/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
